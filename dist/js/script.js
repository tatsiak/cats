"use strict";var cats,catTemplate=document.querySelector("#cat-template"),catsContainer=document.querySelector(".container.cats"),content=document.querySelector(".content"),filterElement=document.querySelector(".filter"),headerCart=document.querySelector(".header__cart"),cartItems=headerCart.querySelector(".header__cart_items"),isBuilding=0,pageCount=0,filterArray=[];function getCatsData(){var e=new XMLHttpRequest,t="https://ma-cats-api.herokuapp.com/api/cats?page="+pageCount;return e.open("GET",t,!1),e.send(null),pageCount++,JSON.parse(e.responseText)}function getCatMarkup(e){var t=document.importNode(catTemplate.content,!0);return t.querySelector(".cat-card__price").textContent=e.price,t.querySelector(".cat-card__image > img").src=Modernizr.svg?e.img_url:"img/default_cat.png",t.querySelector(".cat-card__image > img").setAttribute("alt",e.name),t.querySelector(".cat-data__name").textContent=e.name,t.querySelector(".cat-data__id").textContent=e.id,t.querySelector(".cat-data__category").textContent=e.category,t.querySelector(".cat").id=e.id,t}function filterTrigger(e){var t=e.target.classList[0];e.target.classList.toggle("filter__active"),cats.forEach(function(e){e.querySelector(".cat-data__category").textContent==t&&e.classList.toggle("hide")})}function onDrag(e){e.dataTransfer.dropEffect="move",e.dataTransfer.effectAllowed="move";var t=e.target||e.srcElement,a=e.dataTransfer.setData("id",t.id);console.log(a)}function onDragOver(e){return e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,!1}function addCartItem(e,t){var a=e.cloneNode(!0);a.setAttribute("data-id",t),a.removeAttribute("id"),a.classList.add("header__cart_item"),headerCart.querySelector(".empty").classList.add("hide"),cartItems.appendChild(a)}function onDrop(e){e.preventDefault&&e.preventDefault(),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;var t=e.dataTransfer.getData("id"),a=document.getElementById(t);return addCartItem(a,t),a.classList.add("hide"),!1}getCatsData().cats.forEach(function(e){filterArray.includes(e.category)||filterArray.push(e.category),catsContainer.appendChild(getCatMarkup(e))}),filterArray.forEach(function(e){var t=document.createElement("button");t.innerHTML=e,t.classList.add(e),filterElement.addEventListener("click",filterTrigger),filterElement.appendChild(t)}),(cats=catsContainer.querySelectorAll(".cat")).forEach(function(e){e.addEventListener("dragstart",onDrag)}),headerCart.addEventListener("dragover",onDragOver),headerCart.addEventListener("drop",onDrop);